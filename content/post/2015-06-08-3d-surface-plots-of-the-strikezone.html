---
title: "3D surface plots of the strikezone"
date: "2015-06-08"
categories: [Baseball, R]
---

<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/plotly-binding/plotly.js"></script>
<script src="/rmarkdown-libs/typedarray/typedarray.min.js"></script>
<script src="/rmarkdown-libs/jquery/jquery.min.js"></script>
<link href="/rmarkdown-libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
<script src="/rmarkdown-libs/crosstalk/js/crosstalk.min.js"></script>
<link href="/rmarkdown-libs/plotlyjs/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="/rmarkdown-libs/plotlyjs/plotly-latest.min.js"></script>


<p>Over the past month, I’ve been working on <a href="https://github.com/ropensci/plotly">plotly’s R package</a>; and in particular, a new interface for creating plotly visualizations from R. I’m really excited about this project and I think it’s one of the most elegant, straight-forward ways to create interactive graphics that are easy to share. In this post, I’ll show you just how easy it is to create 3D surface plots of the strikezone using plotly.</p>
<div id="kernel-densities" class="section level3">
<h3>Kernel Densities</h3>
<p>The <strong>MASS</strong> package in R has a function called <code>kde2d()</code> which performs 2D density estimation (with a bivariate normal kernel)</p>
<pre class="r"><code>data(pitches, package = &quot;pitchRx&quot;)
dens &lt;- with(pitches, MASS::kde2d(px, pz))</code></pre>
<pre class="r"><code># plotly isn&#39;t available on CRAN, but u can install from GitHub
# devtools::install_github(&quot;ropensci/plotly@carson-dsl&quot;)
library(plotly)
with(dens, plot_ly(x = x, y = y, z = z, type = &quot;surface&quot;))</code></pre>
<div id="18eb76f3fc15" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="18eb76f3fc15">{"x":{"visdat":{"18eb2ecc8be3":["function () ","plotlyVisDat"]},"cur_data":"18eb2ecc8be3","attrs":{"18eb2ecc8be3":{"x":[-2.57,-2.35016666666667,-2.13033333333333,-1.9105,-1.69066666666667,-1.47083333333333,-1.251,-1.03116666666667,-0.811333333333333,-0.5915,-0.371666666666667,-0.151833333333333,0.0680000000000001,0.287833333333333,0.507666666666667,0.7275,0.947333333333333,1.16716666666667,1.387,1.60683333333333,1.82666666666667,2.0465,2.26633333333333,2.48616666666667,2.706],"y":[-0.332,-0.07875,0.1745,0.42775,0.681,0.93425,1.1875,1.44075,1.694,1.94725,2.2005,2.45375,2.707,2.96025,3.2135,3.46675,3.72,3.97325,4.2265,4.47975,4.733,4.98625,5.2395,5.49275,5.746],"z":[[1.94486550490262e-22,9.05820899635942e-19,1.68662305252932e-15,3.18758255882389e-12,1.07153537801563e-09,4.89365879019289e-08,3.78450939982428e-07,6.62530167924901e-06,0.000364068663763768,0.003421933985244,0.00496597328910233,0.00161514763189889,0.000655095266411036,0.00167526360306156,0.00340085408895158,0.00352956645562639,0.00127503908507418,0.000103628831838848,1.58977833397329e-05,9.9071765224381e-07,8.36335047050154e-09,9.30730124210472e-12,1.38712915421598e-15,2.96122288416002e-20,3.406761284701e-24],[1.40197455954243e-19,6.14169697334107e-16,4.2109834454328e-13,2.32000640889035e-10,7.03446253958646e-08,3.15623108433146e-06,2.16946624630313e-05,5.53217934376366e-05,0.000645960771618455,0.00475168849091251,0.00808297861797341,0.00554301399043084,0.00344367859842939,0.0052471819733525,0.00909283051351779,0.0075363628066226,0.00278877511974145,0.000624581202539905,0.000218025308967713,1.46125559085647e-05,1.33274951864515e-07,1.67362214429255e-10,3.10227271305366e-14,5.86788963180865e-18,2.20351757347874e-20],[3.23724990068862e-17,1.40831980341923e-13,8.03093160801413e-11,1.01038581389775e-08,1.55210964366428e-06,6.66735915747325e-05,0.000429656213455741,0.000723366952082516,0.00165545200198108,0.00789578298428728,0.0158795981224699,0.0157043006157774,0.0100351078037966,0.00977704273159876,0.0134162162525542,0.0105975411536272,0.00530314869320771,0.00265224880576957,0.00113625977859005,8.65322445951924e-05,9.49940019946853e-07,1.61069226038483e-09,1.17125161365094e-12,9.0868961940533e-15,4.73965808049816e-17],[2.41449007934024e-15,1.04216377752384e-11,5.80983905410231e-09,4.46534206940179e-07,1.4379815426864e-05,0.000467294231317575,0.00285555807083459,0.00412231901598428,0.00563671486612448,0.0150249549717106,0.028905080235489,0.0318060683063146,0.0221587318746297,0.0198804306977811,0.0209924970916654,0.0187576059741285,0.0118933678096054,0.00623276531878991,0.00286887229124204,0.000273142379450957,4.25362467998376e-06,2.31406078263687e-08,2.30668986534797e-10,5.96205784270009e-12,3.26738827855137e-14],[6.17390217377862e-14,2.55090067000361e-10,1.38951707139191e-07,9.91544886992095e-06,0.000115417322627143,0.00119841225683334,0.00660622838044079,0.00947366049684737,0.013432986022668,0.0237222205409373,0.0361114518918922,0.0411298718847931,0.038513631449872,0.039639730429876,0.034588891588087,0.0296699174298024,0.0206147169952129,0.0110180794064919,0.00493635822096934,0.000600775953867129,2.49911576305663e-05,7.73310210277741e-07,3.43503907628832e-08,1.29864145197697e-09,7.19625701485179e-12],[7.08224137913998e-13,2.42187359282291e-09,1.17999874746607e-06,7.88679560883438e-05,0.00073284023536415,0.00205191855055047,0.00762200855635267,0.0136155177318802,0.0245893928795013,0.0421409077247095,0.052592244378739,0.0522819848791115,0.0589007362579683,0.0639840834757187,0.0489220893599659,0.0380194563562404,0.0273180767444702,0.0165182861772598,0.00639767947228537,0.00139353512806205,0.00022604395629422,1.6150510035552e-05,2.17172476483719e-06,9.10895798840705e-08,5.06156897559452e-10],[5.54683839835092e-12,1.38810302528187e-08,5.0545160295323e-06,0.000270899607467532,0.00218323551431744,0.00455539908252006,0.0121490315721638,0.0222849364203494,0.0373990672849386,0.0651012684608787,0.0865549234980845,0.0879991524462846,0.0921838693189722,0.0880345965623046,0.0627152268637112,0.0477363829103579,0.0343134737214374,0.0209315368307784,0.00800748468010205,0.00391971036720103,0.0010715548690343,0.00019210877021986,4.75952854706871e-05,2.04379425116725e-06,1.14857059398436e-08],[2.42042973960442e-11,5.32106559478739e-08,1.58605057888914e-05,0.000659987487240921,0.00419182955602604,0.00803497333833688,0.0186606367327213,0.0313315996238675,0.0446340805218208,0.0790179697874303,0.121144174968061,0.131126422683084,0.127101812961371,0.104353117839534,0.0750683835254985,0.059904228152984,0.0416188022338199,0.0247943953858305,0.0118581421579832,0.00747108879510355,0.00261633146464152,0.00116274608464545,0.000341042331505111,1.46682240353917e-05,1.16283600137091e-07],[4.3428218965536e-11,9.57131159060599e-08,2.80415968062358e-05,0.0011130962682008,0.00652354734358377,0.0105107459304788,0.019383841957921,0.0367905086203414,0.0556857756114204,0.0980641305419306,0.147047335400856,0.158211930804006,0.143437832778001,0.114151176818886,0.085281832405814,0.0722380284330549,0.0512501442498922,0.030804873804477,0.017040073538073,0.0120721423855314,0.00576787128362364,0.00305267857754461,0.000807010517446508,3.48646920329664e-05,3.23007697731092e-06],[4.09977549319959e-11,9.44467018979811e-08,2.9137160788271e-05,0.00123196793451247,0.00778201506508134,0.0120343644940001,0.0188917316809787,0.0404636910164624,0.0684592333585217,0.111564285551591,0.158822303395105,0.167858014710074,0.142421478013693,0.123020825780923,0.0973430480381255,0.0870082451087328,0.0700044443049839,0.0431691063967568,0.0222594290903054,0.0165694452179337,0.0115137005796953,0.00476652682998182,0.000762560135493954,5.69630050964745e-05,8.48903532824438e-05],[5.64863425651444e-11,1.16321170963502e-07,3.36631656154679e-05,0.00140197578181981,0.00907610720703086,0.0137979271114078,0.0196507320249154,0.037888702312659,0.0665513118830588,0.103211480580275,0.150964186007225,0.163662728946748,0.148707276144394,0.133082952914503,0.115571428566338,0.104933701923105,0.08936114336543,0.0570210197349577,0.0264328292565989,0.0176627948911594,0.0177561299004007,0.00747156838847413,0.000716357071793947,0.000283915835631553,0.000753354963691705],[1.0728253882957e-10,1.81432519067608e-07,4.25330345953158e-05,0.00145681469048262,0.00843026943180805,0.0141153687513511,0.0191282961291485,0.0300136143828505,0.0530775893509592,0.0843889614501969,0.134600840512132,0.167458196958317,0.175715716462062,0.151731864792361,0.139792829729934,0.122934073854403,0.0998780463750289,0.0663406847099241,0.0320126989417378,0.0204892741939581,0.0219725383309849,0.0100202606531234,0.00110546451712761,0.000794920499945772,0.00213748108140143],[1.01666314731398e-10,1.55784241314551e-07,3.20220622340776e-05,0.000936033860613628,0.00523696439215741,0.0123776759889345,0.016862865136874,0.0240202449201997,0.0464748253332778,0.0807021420276064,0.131855495271966,0.183617987526458,0.212924078769036,0.19018462371817,0.169382614716867,0.139207308242185,0.107781200029961,0.0721890387547594,0.0363465412193483,0.0206308929120999,0.0193108490783355,0.00983411453441234,0.00194779536335789,0.000828884688391069,0.00193746757614308],[1.09329820973751e-10,9.61310487259512e-08,1.34233629358919e-05,0.000312641999847617,0.00191477597547265,0.00693395768110526,0.0132558303759623,0.0270557861561328,0.0575100234355291,0.101758595472878,0.156138213259114,0.216270972253469,0.257116049411387,0.234828135726369,0.197490668444119,0.15348094421114,0.109839040399583,0.0713427798854461,0.0387181548525296,0.0184485659204472,0.015246501079863,0.0100299811907059,0.00369980160463016,0.000580211096286,0.000565522317135138],[8.15278998862128e-10,5.03873153756171e-07,4.06626286386191e-05,0.000456586467118297,0.00139678242274123,0.00541970614164835,0.0154502844200562,0.0378000586949403,0.0741326430860739,0.121751153777242,0.172312591494422,0.230363439814101,0.266730895402626,0.241360642664594,0.198224242406189,0.149395177220942,0.0996775067379294,0.0597177371538926,0.0370241346652716,0.0205673715334376,0.0150452681902388,0.00901137627527405,0.00350761902841751,0.000397952678586922,5.77833971735181e-05],[2.74624461296091e-09,1.70028312311834e-06,0.000138279729392588,0.00158931197099077,0.0042583514029465,0.0104068918457789,0.0231653241159445,0.0464618218863574,0.0847437292848861,0.128135737411035,0.168733527914037,0.214685156331693,0.23838500482843,0.217180366203671,0.171200202309432,0.121974053876656,0.0859021909995411,0.0468491550871453,0.0289549092335559,0.0181356708584234,0.0110572612358182,0.00480316596902594,0.00126533400571846,0.000125726679627271,3.55876797805783e-06],[3.12020321074133e-09,1.96615396973619e-06,0.000169356406643644,0.00228760423193573,0.00800948858765454,0.0174783588686453,0.0320795182921384,0.0546034097615501,0.0860210660767122,0.122486622012254,0.162764365155746,0.192391695636903,0.199889351939613,0.173630280847488,0.123862996949959,0.0821188261987691,0.0582043302836219,0.0306280243789001,0.018223167417485,0.0101729391150521,0.00601482469362366,0.00215246928417329,0.000241967738013273,1.42622706074809e-05,2.3269867537851e-07],[2.48361775741944e-09,1.46412204353492e-06,0.000124579782611106,0.00183425924700307,0.00805857888621526,0.0197888347305013,0.0363471896589006,0.0623528755313438,0.077947453535413,0.0924114083259891,0.124258427659546,0.141762097026223,0.138673949441785,0.112205434083456,0.0782388704235092,0.0529156916076557,0.0332540497936737,0.0172544714833241,0.0105502951828555,0.00490373379455185,0.00345872484632063,0.000972113728977954,5.42125788299995e-05,8.61053669191924e-07,7.95937451428553e-09],[1.51342134881132e-08,2.60290527826408e-06,0.000183126593803456,0.00197994906888459,0.00606808632500794,0.014477745772577,0.0273178110568583,0.0527012232380463,0.0610080138042714,0.0621108783369233,0.0774292498652643,0.0872599243848325,0.0777509196341325,0.0588496877363861,0.0449583384059831,0.0339236283915783,0.0190962439916877,0.0083969702335094,0.00590180231259239,0.00246166224310066,0.00183263243575827,0.000379064851280888,1.26078339755764e-05,7.63182750716343e-08,1.49394958239962e-10],[1.12826387257236e-06,6.21048355088549e-06,0.000203963133622854,0.00200727114017136,0.00507702313271708,0.00890814175375847,0.0138661685184782,0.027773576201284,0.037348432655031,0.0435567454536479,0.0514717047186212,0.0513798878384631,0.0390680809174253,0.0286271092830676,0.0250474389661529,0.0188445070022002,0.010491659204745,0.00308961479727424,0.00221079642365558,0.000798163578526956,0.000448771009699033,8.23042840520462e-05,2.11356283969654e-06,7.90283493561116e-09,5.07106032639216e-12],[4.05834224012983e-05,6.44435433634926e-05,0.000358793474698209,0.00129606855721237,0.00334411086979482,0.00487620140135891,0.0068307907545695,0.0117112282775891,0.0178099047184121,0.0227207959043765,0.026972053065398,0.0246514775900859,0.0183764316845181,0.0143591611480435,0.0132525390339448,0.00896335983862429,0.00582552530302285,0.0012387537542842,0.000384944837152416,0.000115260093240992,3.86232392236697e-05,6.62744131660894e-06,1.59749294086991e-07,5.0834564715025e-10,2.23316558736797e-13],[0.00047905214482304,0.000408756058082303,0.00141448765872271,0.00196148753895072,0.00248516074839662,0.00245075321924254,0.00494308852184594,0.00615160822618376,0.00579511334144655,0.00691296683455517,0.00931640766943761,0.00981343997370129,0.0106469085928544,0.00725994721585735,0.00469833415074846,0.00285322484003017,0.0021763514765506,0.000453657755093486,3.43429005018669e-05,6.39431669319879e-06,1.14185307615841e-06,1.75482637853875e-07,4.16954596727224e-09,1.28352727599786e-11,5.14050988025376e-15],[0.001822999317468,0.00101889471601245,0.00218241803934283,0.00268976221292703,0.00267593031755606,0.00256294764140212,0.00393431827977443,0.00306746984013007,0.00121557095120644,0.00184948175621883,0.00386221444777413,0.00544067156573733,0.00801943123904324,0.00373096207921975,0.000946357340232175,0.000419483459163691,0.000331902158989374,7.2248354831662e-05,2.64629400743431e-06,1.31438636668634e-07,1.21541687204239e-08,1.49705346238237e-09,3.52360656263343e-11,1.07819398063424e-13,4.24427510882887e-17],[0.00222336083233322,0.000976666206566312,0.00109476951957613,0.00128820910299042,0.00133302698896538,0.00194304100727287,0.00205157852105068,0.000808673506325655,0.000532363874398442,0.00185755612070599,0.00316878608744537,0.00392750927487754,0.00487789420449942,0.00162139567347396,0.000137191168062767,2.39563334486873e-05,1.74135794477198e-05,3.91863532741533e-06,1.26545578201811e-07,1.30269307438288e-09,4.96007883026432e-11,4.1250127234568e-12,9.53059438380034e-14,2.91203963755797e-16,1.14289648366549e-19],[0.000866978468613612,0.000338894812277024,0.000180383444329124,0.000198446613935681,0.000235672678421239,0.000559528517758927,0.000526710247699189,0.000128543007615703,0.000685347518889442,0.00252926029377524,0.00227926903352613,0.0019088356121644,0.00198731388631274,0.000530662484983996,2.2440487012024e-05,5.88682521968568e-07,3.01855102802794e-07,6.9277207364183e-08,2.23120568212561e-09,1.10149951141039e-11,8.26016299030163e-14,3.72369308544581e-15,8.23747180416949e-17,2.51363474554799e-19,9.86007034167459e-23]],"alpha":1,"sizes":[10,100],"type":"surface"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1]},"yaxis":{"domain":[0,1]},"hovermode":"closest","showlegend":false,"legend":{"y":0.5,"yanchor":"top"}},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"colorbar":{"title":"","ticklen":2,"len":0.5,"y":1,"lenmode":"fraction","yanchor":"top"},"colorscale":[["0","rgba(68,1,84,1)"],["3.57311228197746e-13","rgba(68,1,84,1)"],["4.09888103921057e-10","rgba(68,1,84,1)"],["4.55671574981119e-08","rgba(68,1,84,1)"],["1.41884928407398e-06","rgba(68,1,84,1)"],["2.3283705254732e-05","rgba(68,1,84,1)"],["0.000152151187210759","rgba(68,1,84,1)"],["0.000720234414276886","rgba(68,1,84,1)"],["0.00179601295942834","rgba(68,2,85,1)"],["0.00364454866584002","rgba(68,2,85,1)"],["0.00620645013575276","rgba(68,4,86,1)"],["0.00857645016518476","rgba(69,5,87,1)"],["0.0139877387416554","rgba(69,7,88,1)"],["0.0211325907994871","rgba(69,10,91,1)"],["0.0302123939337848","rgba(70,14,94,1)"],["0.0431659803125378","rgba(70,19,98,1)"],["0.0632205171111499","rgba(71,26,104,1)"],["0.0784743619563928","rgba(72,31,109,1)"],["0.115490459993311","rgba(72,42,121,1)"],["0.157990350765698","rgba(69,55,127,1)"],["0.224586762109277","rgba(62,75,137,1)"],["0.322055646646682","rgba(51,101,142,1)"],["0.457292559575967","rgba(38,133,141,1)"],["0.59544022133381","rgba(41,167,132,1)"],["1","rgba(253,231,37,1)"]],"showscale":true,"x":[-2.57,-2.35016666666667,-2.13033333333333,-1.9105,-1.69066666666667,-1.47083333333333,-1.251,-1.03116666666667,-0.811333333333333,-0.5915,-0.371666666666667,-0.151833333333333,0.0680000000000001,0.287833333333333,0.507666666666667,0.7275,0.947333333333333,1.16716666666667,1.387,1.60683333333333,1.82666666666667,2.0465,2.26633333333333,2.48616666666667,2.706],"y":[-0.332,-0.07875,0.1745,0.42775,0.681,0.93425,1.1875,1.44075,1.694,1.94725,2.2005,2.45375,2.707,2.96025,3.2135,3.46675,3.72,3.97325,4.2265,4.47975,4.733,4.98625,5.2395,5.49275,5.746],"z":[[1.94486550490262e-22,9.05820899635942e-19,1.68662305252932e-15,3.18758255882389e-12,1.07153537801563e-09,4.89365879019289e-08,3.78450939982428e-07,6.62530167924901e-06,0.000364068663763768,0.003421933985244,0.00496597328910233,0.00161514763189889,0.000655095266411036,0.00167526360306156,0.00340085408895158,0.00352956645562639,0.00127503908507418,0.000103628831838848,1.58977833397329e-05,9.9071765224381e-07,8.36335047050154e-09,9.30730124210472e-12,1.38712915421598e-15,2.96122288416002e-20,3.406761284701e-24],[1.40197455954243e-19,6.14169697334107e-16,4.2109834454328e-13,2.32000640889035e-10,7.03446253958646e-08,3.15623108433146e-06,2.16946624630313e-05,5.53217934376366e-05,0.000645960771618455,0.00475168849091251,0.00808297861797341,0.00554301399043084,0.00344367859842939,0.0052471819733525,0.00909283051351779,0.0075363628066226,0.00278877511974145,0.000624581202539905,0.000218025308967713,1.46125559085647e-05,1.33274951864515e-07,1.67362214429255e-10,3.10227271305366e-14,5.86788963180865e-18,2.20351757347874e-20],[3.23724990068862e-17,1.40831980341923e-13,8.03093160801413e-11,1.01038581389775e-08,1.55210964366428e-06,6.66735915747325e-05,0.000429656213455741,0.000723366952082516,0.00165545200198108,0.00789578298428728,0.0158795981224699,0.0157043006157774,0.0100351078037966,0.00977704273159876,0.0134162162525542,0.0105975411536272,0.00530314869320771,0.00265224880576957,0.00113625977859005,8.65322445951924e-05,9.49940019946853e-07,1.61069226038483e-09,1.17125161365094e-12,9.0868961940533e-15,4.73965808049816e-17],[2.41449007934024e-15,1.04216377752384e-11,5.80983905410231e-09,4.46534206940179e-07,1.4379815426864e-05,0.000467294231317575,0.00285555807083459,0.00412231901598428,0.00563671486612448,0.0150249549717106,0.028905080235489,0.0318060683063146,0.0221587318746297,0.0198804306977811,0.0209924970916654,0.0187576059741285,0.0118933678096054,0.00623276531878991,0.00286887229124204,0.000273142379450957,4.25362467998376e-06,2.31406078263687e-08,2.30668986534797e-10,5.96205784270009e-12,3.26738827855137e-14],[6.17390217377862e-14,2.55090067000361e-10,1.38951707139191e-07,9.91544886992095e-06,0.000115417322627143,0.00119841225683334,0.00660622838044079,0.00947366049684737,0.013432986022668,0.0237222205409373,0.0361114518918922,0.0411298718847931,0.038513631449872,0.039639730429876,0.034588891588087,0.0296699174298024,0.0206147169952129,0.0110180794064919,0.00493635822096934,0.000600775953867129,2.49911576305663e-05,7.73310210277741e-07,3.43503907628832e-08,1.29864145197697e-09,7.19625701485179e-12],[7.08224137913998e-13,2.42187359282291e-09,1.17999874746607e-06,7.88679560883438e-05,0.00073284023536415,0.00205191855055047,0.00762200855635267,0.0136155177318802,0.0245893928795013,0.0421409077247095,0.052592244378739,0.0522819848791115,0.0589007362579683,0.0639840834757187,0.0489220893599659,0.0380194563562404,0.0273180767444702,0.0165182861772598,0.00639767947228537,0.00139353512806205,0.00022604395629422,1.6150510035552e-05,2.17172476483719e-06,9.10895798840705e-08,5.06156897559452e-10],[5.54683839835092e-12,1.38810302528187e-08,5.0545160295323e-06,0.000270899607467532,0.00218323551431744,0.00455539908252006,0.0121490315721638,0.0222849364203494,0.0373990672849386,0.0651012684608787,0.0865549234980845,0.0879991524462846,0.0921838693189722,0.0880345965623046,0.0627152268637112,0.0477363829103579,0.0343134737214374,0.0209315368307784,0.00800748468010205,0.00391971036720103,0.0010715548690343,0.00019210877021986,4.75952854706871e-05,2.04379425116725e-06,1.14857059398436e-08],[2.42042973960442e-11,5.32106559478739e-08,1.58605057888914e-05,0.000659987487240921,0.00419182955602604,0.00803497333833688,0.0186606367327213,0.0313315996238675,0.0446340805218208,0.0790179697874303,0.121144174968061,0.131126422683084,0.127101812961371,0.104353117839534,0.0750683835254985,0.059904228152984,0.0416188022338199,0.0247943953858305,0.0118581421579832,0.00747108879510355,0.00261633146464152,0.00116274608464545,0.000341042331505111,1.46682240353917e-05,1.16283600137091e-07],[4.3428218965536e-11,9.57131159060599e-08,2.80415968062358e-05,0.0011130962682008,0.00652354734358377,0.0105107459304788,0.019383841957921,0.0367905086203414,0.0556857756114204,0.0980641305419306,0.147047335400856,0.158211930804006,0.143437832778001,0.114151176818886,0.085281832405814,0.0722380284330549,0.0512501442498922,0.030804873804477,0.017040073538073,0.0120721423855314,0.00576787128362364,0.00305267857754461,0.000807010517446508,3.48646920329664e-05,3.23007697731092e-06],[4.09977549319959e-11,9.44467018979811e-08,2.9137160788271e-05,0.00123196793451247,0.00778201506508134,0.0120343644940001,0.0188917316809787,0.0404636910164624,0.0684592333585217,0.111564285551591,0.158822303395105,0.167858014710074,0.142421478013693,0.123020825780923,0.0973430480381255,0.0870082451087328,0.0700044443049839,0.0431691063967568,0.0222594290903054,0.0165694452179337,0.0115137005796953,0.00476652682998182,0.000762560135493954,5.69630050964745e-05,8.48903532824438e-05],[5.64863425651444e-11,1.16321170963502e-07,3.36631656154679e-05,0.00140197578181981,0.00907610720703086,0.0137979271114078,0.0196507320249154,0.037888702312659,0.0665513118830588,0.103211480580275,0.150964186007225,0.163662728946748,0.148707276144394,0.133082952914503,0.115571428566338,0.104933701923105,0.08936114336543,0.0570210197349577,0.0264328292565989,0.0176627948911594,0.0177561299004007,0.00747156838847413,0.000716357071793947,0.000283915835631553,0.000753354963691705],[1.0728253882957e-10,1.81432519067608e-07,4.25330345953158e-05,0.00145681469048262,0.00843026943180805,0.0141153687513511,0.0191282961291485,0.0300136143828505,0.0530775893509592,0.0843889614501969,0.134600840512132,0.167458196958317,0.175715716462062,0.151731864792361,0.139792829729934,0.122934073854403,0.0998780463750289,0.0663406847099241,0.0320126989417378,0.0204892741939581,0.0219725383309849,0.0100202606531234,0.00110546451712761,0.000794920499945772,0.00213748108140143],[1.01666314731398e-10,1.55784241314551e-07,3.20220622340776e-05,0.000936033860613628,0.00523696439215741,0.0123776759889345,0.016862865136874,0.0240202449201997,0.0464748253332778,0.0807021420276064,0.131855495271966,0.183617987526458,0.212924078769036,0.19018462371817,0.169382614716867,0.139207308242185,0.107781200029961,0.0721890387547594,0.0363465412193483,0.0206308929120999,0.0193108490783355,0.00983411453441234,0.00194779536335789,0.000828884688391069,0.00193746757614308],[1.09329820973751e-10,9.61310487259512e-08,1.34233629358919e-05,0.000312641999847617,0.00191477597547265,0.00693395768110526,0.0132558303759623,0.0270557861561328,0.0575100234355291,0.101758595472878,0.156138213259114,0.216270972253469,0.257116049411387,0.234828135726369,0.197490668444119,0.15348094421114,0.109839040399583,0.0713427798854461,0.0387181548525296,0.0184485659204472,0.015246501079863,0.0100299811907059,0.00369980160463016,0.000580211096286,0.000565522317135138],[8.15278998862128e-10,5.03873153756171e-07,4.06626286386191e-05,0.000456586467118297,0.00139678242274123,0.00541970614164835,0.0154502844200562,0.0378000586949403,0.0741326430860739,0.121751153777242,0.172312591494422,0.230363439814101,0.266730895402626,0.241360642664594,0.198224242406189,0.149395177220942,0.0996775067379294,0.0597177371538926,0.0370241346652716,0.0205673715334376,0.0150452681902388,0.00901137627527405,0.00350761902841751,0.000397952678586922,5.77833971735181e-05],[2.74624461296091e-09,1.70028312311834e-06,0.000138279729392588,0.00158931197099077,0.0042583514029465,0.0104068918457789,0.0231653241159445,0.0464618218863574,0.0847437292848861,0.128135737411035,0.168733527914037,0.214685156331693,0.23838500482843,0.217180366203671,0.171200202309432,0.121974053876656,0.0859021909995411,0.0468491550871453,0.0289549092335559,0.0181356708584234,0.0110572612358182,0.00480316596902594,0.00126533400571846,0.000125726679627271,3.55876797805783e-06],[3.12020321074133e-09,1.96615396973619e-06,0.000169356406643644,0.00228760423193573,0.00800948858765454,0.0174783588686453,0.0320795182921384,0.0546034097615501,0.0860210660767122,0.122486622012254,0.162764365155746,0.192391695636903,0.199889351939613,0.173630280847488,0.123862996949959,0.0821188261987691,0.0582043302836219,0.0306280243789001,0.018223167417485,0.0101729391150521,0.00601482469362366,0.00215246928417329,0.000241967738013273,1.42622706074809e-05,2.3269867537851e-07],[2.48361775741944e-09,1.46412204353492e-06,0.000124579782611106,0.00183425924700307,0.00805857888621526,0.0197888347305013,0.0363471896589006,0.0623528755313438,0.077947453535413,0.0924114083259891,0.124258427659546,0.141762097026223,0.138673949441785,0.112205434083456,0.0782388704235092,0.0529156916076557,0.0332540497936737,0.0172544714833241,0.0105502951828555,0.00490373379455185,0.00345872484632063,0.000972113728977954,5.42125788299995e-05,8.61053669191924e-07,7.95937451428553e-09],[1.51342134881132e-08,2.60290527826408e-06,0.000183126593803456,0.00197994906888459,0.00606808632500794,0.014477745772577,0.0273178110568583,0.0527012232380463,0.0610080138042714,0.0621108783369233,0.0774292498652643,0.0872599243848325,0.0777509196341325,0.0588496877363861,0.0449583384059831,0.0339236283915783,0.0190962439916877,0.0083969702335094,0.00590180231259239,0.00246166224310066,0.00183263243575827,0.000379064851280888,1.26078339755764e-05,7.63182750716343e-08,1.49394958239962e-10],[1.12826387257236e-06,6.21048355088549e-06,0.000203963133622854,0.00200727114017136,0.00507702313271708,0.00890814175375847,0.0138661685184782,0.027773576201284,0.037348432655031,0.0435567454536479,0.0514717047186212,0.0513798878384631,0.0390680809174253,0.0286271092830676,0.0250474389661529,0.0188445070022002,0.010491659204745,0.00308961479727424,0.00221079642365558,0.000798163578526956,0.000448771009699033,8.23042840520462e-05,2.11356283969654e-06,7.90283493561116e-09,5.07106032639216e-12],[4.05834224012983e-05,6.44435433634926e-05,0.000358793474698209,0.00129606855721237,0.00334411086979482,0.00487620140135891,0.0068307907545695,0.0117112282775891,0.0178099047184121,0.0227207959043765,0.026972053065398,0.0246514775900859,0.0183764316845181,0.0143591611480435,0.0132525390339448,0.00896335983862429,0.00582552530302285,0.0012387537542842,0.000384944837152416,0.000115260093240992,3.86232392236697e-05,6.62744131660894e-06,1.59749294086991e-07,5.0834564715025e-10,2.23316558736797e-13],[0.00047905214482304,0.000408756058082303,0.00141448765872271,0.00196148753895072,0.00248516074839662,0.00245075321924254,0.00494308852184594,0.00615160822618376,0.00579511334144655,0.00691296683455517,0.00931640766943761,0.00981343997370129,0.0106469085928544,0.00725994721585735,0.00469833415074846,0.00285322484003017,0.0021763514765506,0.000453657755093486,3.43429005018669e-05,6.39431669319879e-06,1.14185307615841e-06,1.75482637853875e-07,4.16954596727224e-09,1.28352727599786e-11,5.14050988025376e-15],[0.001822999317468,0.00101889471601245,0.00218241803934283,0.00268976221292703,0.00267593031755606,0.00256294764140212,0.00393431827977443,0.00306746984013007,0.00121557095120644,0.00184948175621883,0.00386221444777413,0.00544067156573733,0.00801943123904324,0.00373096207921975,0.000946357340232175,0.000419483459163691,0.000331902158989374,7.2248354831662e-05,2.64629400743431e-06,1.31438636668634e-07,1.21541687204239e-08,1.49705346238237e-09,3.52360656263343e-11,1.07819398063424e-13,4.24427510882887e-17],[0.00222336083233322,0.000976666206566312,0.00109476951957613,0.00128820910299042,0.00133302698896538,0.00194304100727287,0.00205157852105068,0.000808673506325655,0.000532363874398442,0.00185755612070599,0.00316878608744537,0.00392750927487754,0.00487789420449942,0.00162139567347396,0.000137191168062767,2.39563334486873e-05,1.74135794477198e-05,3.91863532741533e-06,1.26545578201811e-07,1.30269307438288e-09,4.96007883026432e-11,4.1250127234568e-12,9.53059438380034e-14,2.91203963755797e-16,1.14289648366549e-19],[0.000866978468613612,0.000338894812277024,0.000180383444329124,0.000198446613935681,0.000235672678421239,0.000559528517758927,0.000526710247699189,0.000128543007615703,0.000685347518889442,0.00252926029377524,0.00227926903352613,0.0019088356121644,0.00198731388631274,0.000530662484983996,2.2440487012024e-05,5.88682521968568e-07,3.01855102802794e-07,6.9277207364183e-08,2.23120568212561e-09,1.10149951141039e-11,8.26016299030163e-14,3.72369308544581e-15,8.23747180416949e-17,2.51363474554799e-19,9.86007034167459e-23]],"type":"surface","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script>
<p>Although this plot is cool, we can’t perform any interesting statistical inference with it. All we can see is an estimated frequency.</p>
</div>
<div id="probabilistic-surfaces" class="section level3">
<h3>Probabilistic Surfaces</h3>
<p>Brian Mills and I <a href="http://princeofslides.blogspot.com/2013/07/advanced-sab-r-metrics-parallelization.html">have</a> a <a href="https://baseballwithr.wordpress.com/2014/04/21/are-umpires-becoming-less-merciful/">number</a> <a href="https://baseballwithr.wordpress.com/2014/10/23/a-probabilistic-model-for-interpreting-strike-zone-expansion-7/">of</a> <a href="http://onlinelibrary.wiley.com/doi/10.1002/mde.2630/abstract">posts/papers</a> on using generalized additive models (GAMs) to model event probabilities over the strikezone. To keep things simple, we’ll stick with the example data, and model the probablity of a called strike by allowing it to vary by location and batter stance.</p>
<pre class="r"><code># condition on umpire decisions
noswing &lt;- subset(pitches, des %in% c(&quot;Ball&quot;, &quot;Called Strike&quot;))
noswing$strike &lt;- as.numeric(noswing$des %in% &quot;Called Strike&quot;)
library(mgcv)
m &lt;- bam(strike ~ s(px, pz, by = factor(stand)) + factor(stand), 
         data = noswing, family = binomial(link = &#39;logit&#39;))</code></pre>
<pre><code>## Warning in attr(pterms[tind[j]], &quot;term.label&quot;): partial match of
## &#39;term.label&#39; to &#39;term.labels&#39;</code></pre>
<p>Now we use the <code>predict.gam()</code> method to fit response values (for right handers) over a strike-zone grid.</p>
<pre class="r"><code>px &lt;- round(seq(-2, 2, length.out = 20), 2)
pz &lt;- round(seq(1, 4, length.out = 20), 2)
dat &lt;- expand.grid(px = px, pz = pz, stand = &quot;R&quot;)
dat$fit &lt;- as.numeric(predict(m, dat, type = &quot;response&quot;))</code></pre>
<p>plotly’s <code>z</code> argument likes numeric matrices, so we need change the data structure accordingly.</p>
<pre class="r"><code>z &lt;- Reduce(rbind, split(dat$fit, dat$px))
plot_ly(x = px, y = pz, z = z, type = &quot;surface&quot;)</code></pre>
<div id="18eb777aa0fe" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="18eb777aa0fe">{"x":{"visdat":{"18eb23b1f1d0":["function () ","plotlyVisDat"]},"cur_data":"18eb23b1f1d0","attrs":{"18eb23b1f1d0":{"x":[-2,-1.79,-1.58,-1.37,-1.16,-0.95,-0.74,-0.53,-0.32,-0.11,0.11,0.32,0.53,0.74,0.95,1.16,1.37,1.58,1.79,2],"y":[1,1.16,1.32,1.47,1.63,1.79,1.95,2.11,2.26,2.42,2.58,2.74,2.89,3.05,3.21,3.37,3.53,3.68,3.84,4],"z":[[3.57758653526277e-05,8.02205999881526e-05,0.000176264521920287,0.000355341770118825,0.000705038223991468,0.00128051941087968,0.00209173344559967,0.00305705033865498,0.00393759300852239,0.00453870044719242,0.00445378467048278,0.00363482590731713,0.00250583955836422,0.00138912078538691,0.000635864578591468,0.000249392566939524,8.99659342403639e-05,3.41836389671074e-05,1.2578214197928e-05,4.91676808459985e-06],[7.45476426809705e-05,0.00018881802163174,0.000475421237024143,0.00109817279137903,0.00251116482228917,0.00516476498057699,0.00923275049364628,0.0141414929058296,0.0183698791567351,0.0207003497474326,0.0194496669385049,0.0151163445998196,0.00995816928556195,0.00520209838556481,0.00220746940266901,0.000795540731558723,0.000262363781889389,9.23324507736506e-05,3.19965248917357e-05,1.18670305241483e-05],[0.000146980516150693,0.000426534144698078,0.00125769993987692,0.00341919357724018,0.00927938085678559,0.0221237895075691,0.0437710790427745,0.0695360190887174,0.0880613560705054,0.0930668617350125,0.0817287666037524,0.0603759565696069,0.0386517983426933,0.0198460835107981,0.00828026169895449,0.00289811970650278,0.000910537132773933,0.000301486092340666,9.82258090829316e-05,3.42785403883539e-05],[0.000263391803696946,0.000879185855414019,0.00306572843113868,0.00991848122889885,0.0324953171506848,0.0899393533414943,0.189710631450948,0.293825494896133,0.350384975134003,0.349837855311724,0.298442900852794,0.221082574181478,0.147166311005702,0.0808769963252809,0.0360298355850917,0.0130256013277491,0.00404393480909955,0.00127023773431883,0.000374397253609033,0.000117263919882019],[0.000410570632702244,0.00153831207350856,0.00621254697699296,0.0236066855896623,0.0909798563463804,0.269779294311879,0.519490721145432,0.693596390766163,0.760035062572818,0.76008919995028,0.705364189415507,0.60343002739232,0.479254935169088,0.325194153003412,0.174008863702939,0.0694645942403275,0.0215990048680598,0.00632893860346117,0.00164266770869171,0.000440766654106314],[0.000550086949746066,0.00221463473019121,0.0098548669047862,0.0418975814183604,0.178474452678935,0.500561600416987,0.790253285676421,0.90996508601168,0.944766814443165,0.951157627529971,0.940291816716226,0.911372060637796,0.861411865945184,0.762671690828348,0.576612303673157,0.312250552415589,0.108696401579869,0.0303001579550384,0.00686894427019312,0.00155118142068533],[0.000662323949437627,0.00275874308304829,0.0128482689507254,0.057676239129333,0.255781646740576,0.656413047738159,0.900800985042257,0.969088109228592,0.985411658069384,0.989816774631418,0.989354751720544,0.985204765836354,0.975942616674969,0.951748557733086,0.883459852607341,0.691239857177363,0.342489519184858,0.103207131410501,0.0212363510731235,0.00414402007279662],[0.000782956800346974,0.00332535618657425,0.0159071236788277,0.0725089571313433,0.31725605365325,0.740927499366802,0.940199306955872,0.984986205031962,0.994258483896883,0.996761701915689,0.997145331208867,0.996389717596721,0.994139508425889,0.98711407436753,0.962390280803032,0.865632419916952,0.561892651118016,0.198035234255799,0.0393551793515531,0.00701847733993338],[0.000980757011997766,0.00431819028419709,0.0214925122305598,0.0998159341678252,0.401953656565063,0.807426895189325,0.959700270388346,0.990633271296678,0.996704228209915,0.998327429842266,0.998662100932272,0.998380781714803,0.997278896804068,0.993383342865941,0.977732968535457,0.905177384232212,0.624559565846533,0.224028601042125,0.0420744972554509,0.00715032744909287],[0.0013045152930447,0.00614119169872362,0.0324370761807817,0.151791932364619,0.527535726721571,0.873487918887376,0.974101616056351,0.993720062819199,0.997689505561404,0.998787621480355,0.999003089395574,0.998737777703933,0.997721313507065,0.993833403822684,0.97668382031147,0.890442173696708,0.563223016507242,0.173940757221603,0.0299530906871785,0.00499240269487706],[0.00172717305992397,0.00873963412947238,0.0490931789273127,0.226106287868796,0.654716180813954,0.920060849271263,0.983012860233137,0.995337221323391,0.998031402920099,0.998807682086954,0.998890950680399,0.998447619085164,0.996974032263334,0.991213983022013,0.96483518436645,0.834296369210703,0.434841253452042,0.110364072621274,0.0177704338297444,0.00292534511363774],[0.00195936934746731,0.010220431359986,0.0584444586621547,0.264662982850822,0.702064757203795,0.932526708294502,0.984347019850887,0.994957213186529,0.997473138571126,0.998177359163431,0.998061655614383,0.997066012593422,0.99414876053113,0.983361593383074,0.937413520067367,0.742121972398241,0.313184479796472,0.0699267477619188,0.0109825346489566,0.00179210476498614],[0.00164371976720049,0.00827577239019195,0.0457081192111495,0.209502536500128,0.619292434849989,0.896910730560894,0.971969146664769,0.989256313460639,0.993632111918298,0.994646547745293,0.993780128719159,0.990525269357135,0.982322160136238,0.956165032637728,0.865595103779702,0.588397288605818,0.202912350813965,0.0434669922822153,0.0070246392463882,0.00118259263191325],[0.000943377399739131,0.0041983547014355,0.0205132534055921,0.091126176421647,0.344690485602433,0.705233489550625,0.890154037334157,0.94837323539417,0.964511374084361,0.967004814185687,0.960910520907761,0.944821320378604,0.912299749422983,0.833263212718884,0.65012935165063,0.339348933151486,0.100794986550144,0.0229716071134752,0.0041612431591555,0.000770093692625262],[0.000380167362587331,0.00138758264624787,0.00547746313662126,0.0208280068328676,0.0824647411280159,0.251433754267107,0.48918181085693,0.653388745638194,0.715354458157425,0.718145815444073,0.682272093559275,0.618377662503397,0.531504996113593,0.401791841279196,0.242420939307172,0.104973911417611,0.0326287158346794,0.00883967688062923,0.00196156120964452,0.000427122764345633],[0.000121383475541741,0.000355129674703374,0.0010987583018799,0.00334834073666019,0.0110959321849997,0.0331029661129281,0.0768544936959685,0.1272977154237,0.15351665620631,0.150765394010648,0.13034337719123,0.10632986147561,0.0845208030668901,0.0606419983856303,0.036988957570883,0.0180134986006498,0.00694322147082822,0.00238877602260558,0.000678457084873071,0.000182866314534655],[3.59181144901063e-05,8.7550713696409e-05,0.000220347026280471,0.000546122787189098,0.00147207372739153,0.00370592328765444,0.00769026039473285,0.0120598808462887,0.0141216602241,0.0134300515793909,0.0113302927620253,0.00921965702614787,0.00751711360099247,0.00574364429763232,0.00395199531830455,0.00231896743181707,0.00113163513299179,0.000493054032234065,0.000179392562839505,6.07115235223008e-05],[1.08369373872196e-05,2.3147009811202e-05,5.03992671138667e-05,0.000106593707730633,0.000237592300012343,0.000496779149103315,0.000889060432302605,0.00126435393996673,0.00140440421131564,0.00130416616851723,0.00109290579922194,0.000887590857358267,0.000729291279323174,0.000575755787551856,0.000429631366132553,0.000289198751113054,0.000169477222136809,9.0019443364255e-05,4.07307852020344e-05,1.69687071111408e-05],[3.3860915686541e-06,6.51424889752424e-06,1.26028424301529e-05,2.33863482638006e-05,4.42539316442965e-05,7.80355262537118e-05,0.000120985403922715,0.000156876388666035,0.000167527687692359,0.000154665876884462,0.000130662075684365,0.000106874406740694,8.78029047295152e-05,7.04215789863604e-05,5.5069145257435e-05,4.0372346775901e-05,2.6789188722343e-05,1.64513411458274e-05,8.83909940726204e-06,4.37530423436634e-06],[1.08350403035557e-06,1.90146555929556e-06,3.30655766461319e-06,5.45563867444077e-06,8.95810877784895e-06,1.36997059883148e-05,1.88216399482001e-05,2.25911389077143e-05,2.35431609019108e-05,2.19080006673469e-05,1.887855492609e-05,1.57190748266523e-05,1.3133578537934e-05,1.08003843841468e-05,8.70030304390008e-06,6.69518511506208e-06,4.79878896382143e-06,3.25061962543499e-06,1.97723118537716e-06,1.11800688317123e-06]],"alpha":1,"sizes":[10,100],"type":"surface"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1]},"yaxis":{"domain":[0,1]},"hovermode":"closest","showlegend":false,"legend":{"y":0.5,"yanchor":"top"}},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"colorbar":{"title":"","ticklen":2,"len":0.5,"y":1,"lenmode":"fraction","yanchor":"top"},"colorscale":[["0","rgba(68,1,84,1)"],["9.74945588024089e-06","rgba(68,1,84,1)"],["2.70344990050677e-05","rgba(68,1,84,1)"],["8.67744772370683e-05","rgba(68,1,84,1)"],["0.000176921605069058","rgba(68,1,84,1)"],["0.000426778758224965","rgba(68,1,84,1)"],["0.000858047396666489","rgba(68,1,84,1)"],["0.00133591528204641","rgba(68,2,84,1)"],["0.00239007780214052","rgba(68,2,85,1)"],["0.00415785050805144","rgba(68,3,85,1)"],["0.0070620256530295","rgba(68,4,86,1)"],["0.0113112026995204","rgba(69,6,88,1)"],["0.0210521053260512","rgba(69,10,91,1)"],["0.0419604887144914","rgba(70,19,97,1)"],["0.0823618606446044","rgba(72,32,110,1)"],["0.148663248674848","rgba(70,52,126,1)"],["0.264926294227606","rgba(59,86,139,1)"],["0.485943117338107","rgba(37,140,140,1)"],["0.663538933635908","rgba(53,182,121,1)"],["0.834999465692521","rgba(148,214,69,1)"],["0.939743188172847","rgba(214,227,41,1)"],["0.975304005280872","rgba(237,229,39,1)"],["0.992057789415734","rgba(248,230,38,1)"],["0.998090762270634","rgba(252,231,37,1)"],["1","rgba(253,231,37,1)"]],"showscale":true,"x":[-2,-1.79,-1.58,-1.37,-1.16,-0.95,-0.74,-0.53,-0.32,-0.11,0.11,0.32,0.53,0.74,0.95,1.16,1.37,1.58,1.79,2],"y":[1,1.16,1.32,1.47,1.63,1.79,1.95,2.11,2.26,2.42,2.58,2.74,2.89,3.05,3.21,3.37,3.53,3.68,3.84,4],"z":[[3.57758653526277e-05,8.02205999881526e-05,0.000176264521920287,0.000355341770118825,0.000705038223991468,0.00128051941087968,0.00209173344559967,0.00305705033865498,0.00393759300852239,0.00453870044719242,0.00445378467048278,0.00363482590731713,0.00250583955836422,0.00138912078538691,0.000635864578591468,0.000249392566939524,8.99659342403639e-05,3.41836389671074e-05,1.2578214197928e-05,4.91676808459985e-06],[7.45476426809705e-05,0.00018881802163174,0.000475421237024143,0.00109817279137903,0.00251116482228917,0.00516476498057699,0.00923275049364628,0.0141414929058296,0.0183698791567351,0.0207003497474326,0.0194496669385049,0.0151163445998196,0.00995816928556195,0.00520209838556481,0.00220746940266901,0.000795540731558723,0.000262363781889389,9.23324507736506e-05,3.19965248917357e-05,1.18670305241483e-05],[0.000146980516150693,0.000426534144698078,0.00125769993987692,0.00341919357724018,0.00927938085678559,0.0221237895075691,0.0437710790427745,0.0695360190887174,0.0880613560705054,0.0930668617350125,0.0817287666037524,0.0603759565696069,0.0386517983426933,0.0198460835107981,0.00828026169895449,0.00289811970650278,0.000910537132773933,0.000301486092340666,9.82258090829316e-05,3.42785403883539e-05],[0.000263391803696946,0.000879185855414019,0.00306572843113868,0.00991848122889885,0.0324953171506848,0.0899393533414943,0.189710631450948,0.293825494896133,0.350384975134003,0.349837855311724,0.298442900852794,0.221082574181478,0.147166311005702,0.0808769963252809,0.0360298355850917,0.0130256013277491,0.00404393480909955,0.00127023773431883,0.000374397253609033,0.000117263919882019],[0.000410570632702244,0.00153831207350856,0.00621254697699296,0.0236066855896623,0.0909798563463804,0.269779294311879,0.519490721145432,0.693596390766163,0.760035062572818,0.76008919995028,0.705364189415507,0.60343002739232,0.479254935169088,0.325194153003412,0.174008863702939,0.0694645942403275,0.0215990048680598,0.00632893860346117,0.00164266770869171,0.000440766654106314],[0.000550086949746066,0.00221463473019121,0.0098548669047862,0.0418975814183604,0.178474452678935,0.500561600416987,0.790253285676421,0.90996508601168,0.944766814443165,0.951157627529971,0.940291816716226,0.911372060637796,0.861411865945184,0.762671690828348,0.576612303673157,0.312250552415589,0.108696401579869,0.0303001579550384,0.00686894427019312,0.00155118142068533],[0.000662323949437627,0.00275874308304829,0.0128482689507254,0.057676239129333,0.255781646740576,0.656413047738159,0.900800985042257,0.969088109228592,0.985411658069384,0.989816774631418,0.989354751720544,0.985204765836354,0.975942616674969,0.951748557733086,0.883459852607341,0.691239857177363,0.342489519184858,0.103207131410501,0.0212363510731235,0.00414402007279662],[0.000782956800346974,0.00332535618657425,0.0159071236788277,0.0725089571313433,0.31725605365325,0.740927499366802,0.940199306955872,0.984986205031962,0.994258483896883,0.996761701915689,0.997145331208867,0.996389717596721,0.994139508425889,0.98711407436753,0.962390280803032,0.865632419916952,0.561892651118016,0.198035234255799,0.0393551793515531,0.00701847733993338],[0.000980757011997766,0.00431819028419709,0.0214925122305598,0.0998159341678252,0.401953656565063,0.807426895189325,0.959700270388346,0.990633271296678,0.996704228209915,0.998327429842266,0.998662100932272,0.998380781714803,0.997278896804068,0.993383342865941,0.977732968535457,0.905177384232212,0.624559565846533,0.224028601042125,0.0420744972554509,0.00715032744909287],[0.0013045152930447,0.00614119169872362,0.0324370761807817,0.151791932364619,0.527535726721571,0.873487918887376,0.974101616056351,0.993720062819199,0.997689505561404,0.998787621480355,0.999003089395574,0.998737777703933,0.997721313507065,0.993833403822684,0.97668382031147,0.890442173696708,0.563223016507242,0.173940757221603,0.0299530906871785,0.00499240269487706],[0.00172717305992397,0.00873963412947238,0.0490931789273127,0.226106287868796,0.654716180813954,0.920060849271263,0.983012860233137,0.995337221323391,0.998031402920099,0.998807682086954,0.998890950680399,0.998447619085164,0.996974032263334,0.991213983022013,0.96483518436645,0.834296369210703,0.434841253452042,0.110364072621274,0.0177704338297444,0.00292534511363774],[0.00195936934746731,0.010220431359986,0.0584444586621547,0.264662982850822,0.702064757203795,0.932526708294502,0.984347019850887,0.994957213186529,0.997473138571126,0.998177359163431,0.998061655614383,0.997066012593422,0.99414876053113,0.983361593383074,0.937413520067367,0.742121972398241,0.313184479796472,0.0699267477619188,0.0109825346489566,0.00179210476498614],[0.00164371976720049,0.00827577239019195,0.0457081192111495,0.209502536500128,0.619292434849989,0.896910730560894,0.971969146664769,0.989256313460639,0.993632111918298,0.994646547745293,0.993780128719159,0.990525269357135,0.982322160136238,0.956165032637728,0.865595103779702,0.588397288605818,0.202912350813965,0.0434669922822153,0.0070246392463882,0.00118259263191325],[0.000943377399739131,0.0041983547014355,0.0205132534055921,0.091126176421647,0.344690485602433,0.705233489550625,0.890154037334157,0.94837323539417,0.964511374084361,0.967004814185687,0.960910520907761,0.944821320378604,0.912299749422983,0.833263212718884,0.65012935165063,0.339348933151486,0.100794986550144,0.0229716071134752,0.0041612431591555,0.000770093692625262],[0.000380167362587331,0.00138758264624787,0.00547746313662126,0.0208280068328676,0.0824647411280159,0.251433754267107,0.48918181085693,0.653388745638194,0.715354458157425,0.718145815444073,0.682272093559275,0.618377662503397,0.531504996113593,0.401791841279196,0.242420939307172,0.104973911417611,0.0326287158346794,0.00883967688062923,0.00196156120964452,0.000427122764345633],[0.000121383475541741,0.000355129674703374,0.0010987583018799,0.00334834073666019,0.0110959321849997,0.0331029661129281,0.0768544936959685,0.1272977154237,0.15351665620631,0.150765394010648,0.13034337719123,0.10632986147561,0.0845208030668901,0.0606419983856303,0.036988957570883,0.0180134986006498,0.00694322147082822,0.00238877602260558,0.000678457084873071,0.000182866314534655],[3.59181144901063e-05,8.7550713696409e-05,0.000220347026280471,0.000546122787189098,0.00147207372739153,0.00370592328765444,0.00769026039473285,0.0120598808462887,0.0141216602241,0.0134300515793909,0.0113302927620253,0.00921965702614787,0.00751711360099247,0.00574364429763232,0.00395199531830455,0.00231896743181707,0.00113163513299179,0.000493054032234065,0.000179392562839505,6.07115235223008e-05],[1.08369373872196e-05,2.3147009811202e-05,5.03992671138667e-05,0.000106593707730633,0.000237592300012343,0.000496779149103315,0.000889060432302605,0.00126435393996673,0.00140440421131564,0.00130416616851723,0.00109290579922194,0.000887590857358267,0.000729291279323174,0.000575755787551856,0.000429631366132553,0.000289198751113054,0.000169477222136809,9.0019443364255e-05,4.07307852020344e-05,1.69687071111408e-05],[3.3860915686541e-06,6.51424889752424e-06,1.26028424301529e-05,2.33863482638006e-05,4.42539316442965e-05,7.80355262537118e-05,0.000120985403922715,0.000156876388666035,0.000167527687692359,0.000154665876884462,0.000130662075684365,0.000106874406740694,8.78029047295152e-05,7.04215789863604e-05,5.5069145257435e-05,4.0372346775901e-05,2.6789188722343e-05,1.64513411458274e-05,8.83909940726204e-06,4.37530423436634e-06],[1.08350403035557e-06,1.90146555929556e-06,3.30655766461319e-06,5.45563867444077e-06,8.95810877784895e-06,1.36997059883148e-05,1.88216399482001e-05,2.25911389077143e-05,2.35431609019108e-05,2.19080006673469e-05,1.887855492609e-05,1.57190748266523e-05,1.3133578537934e-05,1.08003843841468e-05,8.70030304390008e-06,6.69518511506208e-06,4.79878896382143e-06,3.25061962543499e-06,1.97723118537716e-06,1.11800688317123e-06]],"type":"surface","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script>
<p>It’s more interesting to look at the difference in fitted values for right/left handed batters:</p>
<pre class="r"><code>dat2 &lt;- expand.grid(px = px, pz = pz, stand = &quot;L&quot;)
dat2$fit &lt;- as.numeric(predict(m, dat2, type = &quot;response&quot;))
z &lt;- Reduce(rbind, split(dat2$fit - dat$fit, dat2$px))
plot_ly(x = px, y = pz, z = z, type = &quot;surface&quot;)</code></pre>
<div id="18eb6d034b9e" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="18eb6d034b9e">{"x":{"visdat":{"18eb5da0e0bf":["function () ","plotlyVisDat"]},"cur_data":"18eb5da0e0bf","attrs":{"18eb5da0e0bf":{"x":[-2,-1.79,-1.58,-1.37,-1.16,-0.95,-0.74,-0.53,-0.32,-0.11,0.11,0.32,0.53,0.74,0.95,1.16,1.37,1.58,1.79,2],"y":[1,1.16,1.32,1.47,1.63,1.79,1.95,2.11,2.26,2.42,2.58,2.74,2.89,3.05,3.21,3.37,3.53,3.68,3.84,4],"z":[[-3.08284008087714e-05,-6.95055940568146e-05,-0.000152904027610235,-0.000307129199374622,-0.000603336168575354,-0.00107670984843562,-0.00171226369910043,-0.00240874880915773,-0.00295427971153382,-0.00317054647237388,-0.00280952926875751,-0.00196172588475186,-0.00105272569205216,-0.000323960230125378,3.3549517257131e-05,0.000119852559708508,9.61356667690334e-05,5.93721460353743e-05,3.14647681138379e-05,1.58029588207999e-05],[-5.97156266493559e-05,-0.000153088494010707,-0.000387532509628423,-0.000892669522760702,-0.00201640602902329,-0.00404594278989958,-0.00694463181537447,-0.0100057275690944,-0.0119859163758925,-0.0120283711265685,-0.00963624282410412,-0.00596704209154539,-0.0027515914658741,-0.000500846134559077,0.000407598238072749,0.000485581898026756,0.000314646517954195,0.00017103347008332,8.14107830552762e-05,3.74192813287609e-05],[-0.000101627444198409,-0.000301333344533462,-0.000898232088150826,-0.00243441431990618,-0.00649152053922412,-0.0148271879411579,-0.0270315112680516,-0.0374449983586466,-0.0388283465029169,-0.0301817925468875,-0.0172263230031702,-0.00669034984812925,-0.000870561914488886,0.00197750252074761,0.00247649598670947,0.0017710714655731,0.000958124344365332,0.000465610152993699,0.000200220993096641,8.42640062574887e-05],[-0.000128604814171655,-0.000440962030265253,-0.00155556773743255,-0.00500072802176085,-0.0157830111718607,-0.0391865565630043,-0.0647058718962745,-0.0609209903888678,-0.0254246635216605,0.0213731248005544,0.0534323534931901,0.0585823014166358,0.0431002715194586,0.0233890346548393,0.0112657309475754,0.00536020986347699,0.00244888257448314,0.00109063688426224,0.000433192231197526,0.000168959269380315],[-5.35787512105406e-05,-0.000193725916699136,-0.00071984763234496,-0.0024665516752808,-0.00778338414064364,-0.012488888790418,0.00340487085142471,0.0311296079758335,0.05350697699951,0.0789604373028631,0.110144124880591,0.135517408579247,0.125777800734419,0.0746467025094918,0.0237011900823417,0.00439954121958033,0.00155828023525468,0.0010060193941622,0.000519537398411164,0.000229323435681202],[0.000231187815892094,0.001028155057528,0.00502128173702423,0.0212756208079204,0.0704210591732029,0.0977754338871877,0.0567650663573196,0.0287994202941217,0.0207097317586338,0.0210550455213916,0.0272621222368635,0.0375816297686179,0.0429088025060582,0.0243759868905198,-0.0339139628664195,-0.0667488876179007,-0.0338886493262537,-0.00941088994414349,-0.00158339329012525,-0.000124375679941646],[0.00070578158234531,0.00308469810879412,0.0148390754014889,0.0603446183305194,0.158085461671079,0.120993118275384,0.0344675790372146,0.00895908781060817,0.00376636964951738,0.00263854377365913,0.00275033737207775,0.00303010403258119,0.0014060992193039,-0.0106638613391351,-0.0623415435232483,-0.171239414769716,-0.157662323002819,-0.0547482261896157,-0.0104792384390633,-0.00156445878855624],[0.00120944757675567,0.00486009816118491,0.0211982602675762,0.0763932627174608,0.156562830023083,0.0749392028484107,0.00931695344184547,-0.000725702764466818,-0.00112352766913981,-0.000814975010736241,-0.000724799687275901,-0.00106850056599106,-0.00254558529782112,-0.0091595944462225,-0.0391632896923689,-0.147201645441264,-0.242701444321522,-0.113028054189369,-0.0220315040480563,-0.00318557016571292],[0.00165831211253587,0.00573397409548176,0.0204513098643157,0.0552441223744598,0.0605286462669303,-0.0109402112716294,-0.0184175748033502,-0.00868525484471916,-0.00406681240455165,-0.00216461692358394,-0.00156985252088404,-0.00168185358762074,-0.00270702471789352,-0.00694636680186433,-0.0254332208122677,-0.101398748786627,-0.210608338195858,-0.108496962426006,-0.0193501526756375,-0.00229105376373718],[0.00214515762113703,0.00605151361716245,0.0142834428257491,0.00674421627782487,-0.0830113252545907,-0.104858459313984,-0.0476060072654318,-0.0175903928185844,-0.00759174625326553,-0.0038223778548131,-0.00257082153042831,-0.00245700686990069,-0.00337887120162972,-0.00696578141044912,-0.0200801305250857,-0.0647989988406206,-0.108396035876376,-0.0396756946025495,-0.00308192377742362,0.000768520651872757],[0.00301304479020884,0.00681254510602234,0.0055508380609301,-0.0571935625061334,-0.215428108293704,-0.176014098844575,-0.0756923613543237,-0.0297333317385063,-0.0138501640242414,-0.00748645788525681,-0.00522110526972275,-0.00490329419256497,-0.00617291659174912,-0.0104697651230012,-0.0207758523975696,-0.0294517158765599,0.0151969820943215,0.0330428054852378,0.0132472849620316,0.00395833240047616],[0.00463593912761808,0.00972250936398574,0.0043930538171191,-0.0889604124015716,-0.278894733719207,-0.227989726920128,-0.112066633187088,-0.0529076410222092,-0.0294426698025584,-0.0188705628285204,-0.0147931356898146,-0.0144531942736155,-0.0174126729827905,-0.0253946861288933,-0.0370869908410733,-0.0116445645923879,0.0834706357003315,0.0664926685923611,0.0221519578073514,0.00613653868161607],[0.0066687942498245,0.0145874746775531,0.0181229949498726,-0.0499544791683562,-0.261888734053365,-0.29697713307906,-0.197186187941246,-0.124755218146359,-0.0900046015882122,-0.0730233791421587,-0.0667928865377894,-0.0681547654381852,-0.0765354411799265,-0.0931937042562118,-0.101293199597434,-0.0260221675561215,0.0861332499646646,0.064934059311413,0.0237095132839148,0.0071690876821971],[0.0077514196660788,0.0170267426883395,0.030763057913854,0.0207645900610317,-0.116122910138168,-0.32123767976706,-0.369066409714513,-0.345711278582948,-0.331317336368753,-0.332148161327558,-0.337239992428577,-0.33731896888062,-0.328679337590278,-0.298793774248079,-0.208876179406422,-0.0405068102057163,0.0545595963648837,0.0439587522571134,0.0188809019074677,0.00663731414097192],[0.00677998116732583,0.0136766166344597,0.0250199937161132,0.0351437386588164,0.0153200835235364,-0.10269094184081,-0.300294156866944,-0.452193525950744,-0.526820346512151,-0.552864048067155,-0.533740318003105,-0.476274031618956,-0.388894480962361,-0.259813141231144,-0.114547569076005,-0.00853110829773358,0.026270532998724,0.0220705606948521,0.0113720193406875,0.00479006861281537],[0.00441957501535974,0.00778894003230655,0.012540142148981,0.0173167436916603,0.0184411763109792,0.00440344355811548,-0.0360443266925315,-0.0894750888128052,-0.121922064308598,-0.125456895757911,-0.108696702405245,-0.085459967396484,-0.0622076773837985,-0.0357121772079457,-0.0108059125130206,0.00570984074243325,0.0108572435542748,0.00907189266129475,0.00546169557049286,0.00274695672999835],[0.00225324955999086,0.00345783344224472,0.00482546549644145,0.00596820247562728,0.00642314106804783,0.00497815960303374,0.000802829961076174,-0.00466051707841712,-0.00806707180305731,-0.00857575816085395,-0.00712579969234445,-0.00509443595012516,-0.00301562287491784,-0.000558902447204272,0.00185505236696998,0.00354845349115351,0.00396544286363494,0.00334230995206287,0.00226949815936332,0.00133053297176496],[0.000984340193347691,0.0013496359619728,0.00169066836661234,0.00191930093187143,0.001980787260027,0.00175636693773875,0.00122358620658559,0.000576331234525184,0.000147648062675748,-3.54897142083215e-07,7.74015382855556e-05,0.000270581009454098,0.000517610521214735,0.000834734865259236,0.00114835758216744,0.00135844693703667,0.00137028503475841,0.00119199290189003,0.0008900451882533,0.000589631924689919],[0.000402481069886953,0.000507947190207079,0.000593375419375757,0.000641233440522671,0.00064702151846435,0.000601874313523295,0.000513914776167701,0.000410865467976042,0.000333335746125854,0.00028874562991892,0.00028124589461,0.00030274265802603,0.00034398879126769,0.000402287255496514,0.000459948500440884,0.000495061858613304,0.000487579118073008,0.000437016475641103,0.000350497536723171,0.000254936563742146],[0.000163726115550619,0.000195037586347495,0.000218292941710297,0.000230398827193146,0.000231458128184383,0.000221031745330738,0.000202452132495728,0.00018102598729255,0.000163457611590616,0.000151141753612908,0.00014679805188645,0.000150037490389567,0.000158767637217703,0.000171761954889069,0.000184520418412486,0.000191314353707433,0.000187035004073103,0.000171242199650947,0.000144213619097057,0.000112283582046565]],"alpha":1,"sizes":[10,100],"type":"surface"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1]},"yaxis":{"domain":[0,1]},"hovermode":"closest","showlegend":false,"legend":{"y":0.5,"yanchor":"top"}},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"colorbar":{"title":"","ticklen":2,"len":0.5,"y":1,"lenmode":"fraction","yanchor":"top"},"colorscale":[["0","rgba(68,1,84,1)"],["0.375819113633513","rgba(46,114,142,1)"],["0.614860784355106","rgba(45,171,129,1)"],["0.668850762064634","rgba(55,183,120,1)"],["0.721250649503678","rgba(85,194,106,1)"],["0.741869696359183","rgba(95,198,100,1)"],["0.759596614205583","rgba(102,201,95,1)"],["0.766444524785076","rgba(105,203,93,1)"],["0.771921533309259","rgba(107,204,91,1)"],["0.774240177609992","rgba(108,204,90,1)"],["0.776393960310481","rgba(108,205,89,1)"],["0.777456624247221","rgba(109,205,89,1)"],["0.777788366286604","rgba(109,205,89,1)"],["0.777905618351944","rgba(109,205,89,1)"],["0.77810407620918","rgba(109,205,89,1)"],["0.77837085979716","rgba(109,205,89,1)"],["0.779175844927974","rgba(110,205,89,1)"],["0.780392583991449","rgba(111,205,88,1)"],["0.782709563725259","rgba(113,206,87,1)"],["0.785645120818855","rgba(115,206,87,1)"],["0.791031953418375","rgba(119,207,85,1)"],["0.804475202718423","rgba(128,209,80,1)"],["0.817609599394738","rgba(137,211,76,1)"],["0.862617764656217","rgba(165,218,58,1)"],["1","rgba(253,231,37,1)"]],"showscale":true,"x":[-2,-1.79,-1.58,-1.37,-1.16,-0.95,-0.74,-0.53,-0.32,-0.11,0.11,0.32,0.53,0.74,0.95,1.16,1.37,1.58,1.79,2],"y":[1,1.16,1.32,1.47,1.63,1.79,1.95,2.11,2.26,2.42,2.58,2.74,2.89,3.05,3.21,3.37,3.53,3.68,3.84,4],"z":[[-3.08284008087714e-05,-6.95055940568146e-05,-0.000152904027610235,-0.000307129199374622,-0.000603336168575354,-0.00107670984843562,-0.00171226369910043,-0.00240874880915773,-0.00295427971153382,-0.00317054647237388,-0.00280952926875751,-0.00196172588475186,-0.00105272569205216,-0.000323960230125378,3.3549517257131e-05,0.000119852559708508,9.61356667690334e-05,5.93721460353743e-05,3.14647681138379e-05,1.58029588207999e-05],[-5.97156266493559e-05,-0.000153088494010707,-0.000387532509628423,-0.000892669522760702,-0.00201640602902329,-0.00404594278989958,-0.00694463181537447,-0.0100057275690944,-0.0119859163758925,-0.0120283711265685,-0.00963624282410412,-0.00596704209154539,-0.0027515914658741,-0.000500846134559077,0.000407598238072749,0.000485581898026756,0.000314646517954195,0.00017103347008332,8.14107830552762e-05,3.74192813287609e-05],[-0.000101627444198409,-0.000301333344533462,-0.000898232088150826,-0.00243441431990618,-0.00649152053922412,-0.0148271879411579,-0.0270315112680516,-0.0374449983586466,-0.0388283465029169,-0.0301817925468875,-0.0172263230031702,-0.00669034984812925,-0.000870561914488886,0.00197750252074761,0.00247649598670947,0.0017710714655731,0.000958124344365332,0.000465610152993699,0.000200220993096641,8.42640062574887e-05],[-0.000128604814171655,-0.000440962030265253,-0.00155556773743255,-0.00500072802176085,-0.0157830111718607,-0.0391865565630043,-0.0647058718962745,-0.0609209903888678,-0.0254246635216605,0.0213731248005544,0.0534323534931901,0.0585823014166358,0.0431002715194586,0.0233890346548393,0.0112657309475754,0.00536020986347699,0.00244888257448314,0.00109063688426224,0.000433192231197526,0.000168959269380315],[-5.35787512105406e-05,-0.000193725916699136,-0.00071984763234496,-0.0024665516752808,-0.00778338414064364,-0.012488888790418,0.00340487085142471,0.0311296079758335,0.05350697699951,0.0789604373028631,0.110144124880591,0.135517408579247,0.125777800734419,0.0746467025094918,0.0237011900823417,0.00439954121958033,0.00155828023525468,0.0010060193941622,0.000519537398411164,0.000229323435681202],[0.000231187815892094,0.001028155057528,0.00502128173702423,0.0212756208079204,0.0704210591732029,0.0977754338871877,0.0567650663573196,0.0287994202941217,0.0207097317586338,0.0210550455213916,0.0272621222368635,0.0375816297686179,0.0429088025060582,0.0243759868905198,-0.0339139628664195,-0.0667488876179007,-0.0338886493262537,-0.00941088994414349,-0.00158339329012525,-0.000124375679941646],[0.00070578158234531,0.00308469810879412,0.0148390754014889,0.0603446183305194,0.158085461671079,0.120993118275384,0.0344675790372146,0.00895908781060817,0.00376636964951738,0.00263854377365913,0.00275033737207775,0.00303010403258119,0.0014060992193039,-0.0106638613391351,-0.0623415435232483,-0.171239414769716,-0.157662323002819,-0.0547482261896157,-0.0104792384390633,-0.00156445878855624],[0.00120944757675567,0.00486009816118491,0.0211982602675762,0.0763932627174608,0.156562830023083,0.0749392028484107,0.00931695344184547,-0.000725702764466818,-0.00112352766913981,-0.000814975010736241,-0.000724799687275901,-0.00106850056599106,-0.00254558529782112,-0.0091595944462225,-0.0391632896923689,-0.147201645441264,-0.242701444321522,-0.113028054189369,-0.0220315040480563,-0.00318557016571292],[0.00165831211253587,0.00573397409548176,0.0204513098643157,0.0552441223744598,0.0605286462669303,-0.0109402112716294,-0.0184175748033502,-0.00868525484471916,-0.00406681240455165,-0.00216461692358394,-0.00156985252088404,-0.00168185358762074,-0.00270702471789352,-0.00694636680186433,-0.0254332208122677,-0.101398748786627,-0.210608338195858,-0.108496962426006,-0.0193501526756375,-0.00229105376373718],[0.00214515762113703,0.00605151361716245,0.0142834428257491,0.00674421627782487,-0.0830113252545907,-0.104858459313984,-0.0476060072654318,-0.0175903928185844,-0.00759174625326553,-0.0038223778548131,-0.00257082153042831,-0.00245700686990069,-0.00337887120162972,-0.00696578141044912,-0.0200801305250857,-0.0647989988406206,-0.108396035876376,-0.0396756946025495,-0.00308192377742362,0.000768520651872757],[0.00301304479020884,0.00681254510602234,0.0055508380609301,-0.0571935625061334,-0.215428108293704,-0.176014098844575,-0.0756923613543237,-0.0297333317385063,-0.0138501640242414,-0.00748645788525681,-0.00522110526972275,-0.00490329419256497,-0.00617291659174912,-0.0104697651230012,-0.0207758523975696,-0.0294517158765599,0.0151969820943215,0.0330428054852378,0.0132472849620316,0.00395833240047616],[0.00463593912761808,0.00972250936398574,0.0043930538171191,-0.0889604124015716,-0.278894733719207,-0.227989726920128,-0.112066633187088,-0.0529076410222092,-0.0294426698025584,-0.0188705628285204,-0.0147931356898146,-0.0144531942736155,-0.0174126729827905,-0.0253946861288933,-0.0370869908410733,-0.0116445645923879,0.0834706357003315,0.0664926685923611,0.0221519578073514,0.00613653868161607],[0.0066687942498245,0.0145874746775531,0.0181229949498726,-0.0499544791683562,-0.261888734053365,-0.29697713307906,-0.197186187941246,-0.124755218146359,-0.0900046015882122,-0.0730233791421587,-0.0667928865377894,-0.0681547654381852,-0.0765354411799265,-0.0931937042562118,-0.101293199597434,-0.0260221675561215,0.0861332499646646,0.064934059311413,0.0237095132839148,0.0071690876821971],[0.0077514196660788,0.0170267426883395,0.030763057913854,0.0207645900610317,-0.116122910138168,-0.32123767976706,-0.369066409714513,-0.345711278582948,-0.331317336368753,-0.332148161327558,-0.337239992428577,-0.33731896888062,-0.328679337590278,-0.298793774248079,-0.208876179406422,-0.0405068102057163,0.0545595963648837,0.0439587522571134,0.0188809019074677,0.00663731414097192],[0.00677998116732583,0.0136766166344597,0.0250199937161132,0.0351437386588164,0.0153200835235364,-0.10269094184081,-0.300294156866944,-0.452193525950744,-0.526820346512151,-0.552864048067155,-0.533740318003105,-0.476274031618956,-0.388894480962361,-0.259813141231144,-0.114547569076005,-0.00853110829773358,0.026270532998724,0.0220705606948521,0.0113720193406875,0.00479006861281537],[0.00441957501535974,0.00778894003230655,0.012540142148981,0.0173167436916603,0.0184411763109792,0.00440344355811548,-0.0360443266925315,-0.0894750888128052,-0.121922064308598,-0.125456895757911,-0.108696702405245,-0.085459967396484,-0.0622076773837985,-0.0357121772079457,-0.0108059125130206,0.00570984074243325,0.0108572435542748,0.00907189266129475,0.00546169557049286,0.00274695672999835],[0.00225324955999086,0.00345783344224472,0.00482546549644145,0.00596820247562728,0.00642314106804783,0.00497815960303374,0.000802829961076174,-0.00466051707841712,-0.00806707180305731,-0.00857575816085395,-0.00712579969234445,-0.00509443595012516,-0.00301562287491784,-0.000558902447204272,0.00185505236696998,0.00354845349115351,0.00396544286363494,0.00334230995206287,0.00226949815936332,0.00133053297176496],[0.000984340193347691,0.0013496359619728,0.00169066836661234,0.00191930093187143,0.001980787260027,0.00175636693773875,0.00122358620658559,0.000576331234525184,0.000147648062675748,-3.54897142083215e-07,7.74015382855556e-05,0.000270581009454098,0.000517610521214735,0.000834734865259236,0.00114835758216744,0.00135844693703667,0.00137028503475841,0.00119199290189003,0.0008900451882533,0.000589631924689919],[0.000402481069886953,0.000507947190207079,0.000593375419375757,0.000641233440522671,0.00064702151846435,0.000601874313523295,0.000513914776167701,0.000410865467976042,0.000333335746125854,0.00028874562991892,0.00028124589461,0.00030274265802603,0.00034398879126769,0.000402287255496514,0.000459948500440884,0.000495061858613304,0.000487579118073008,0.000437016475641103,0.000350497536723171,0.000254936563742146],[0.000163726115550619,0.000195037586347495,0.000218292941710297,0.000230398827193146,0.000231458128184383,0.000221031745330738,0.000202452132495728,0.00018102598729255,0.000163457611590616,0.000151141753612908,0.00014679805188645,0.000150037490389567,0.000158767637217703,0.000171761954889069,0.000184520418412486,0.000191314353707433,0.000187035004073103,0.000171242199650947,0.000144213619097057,0.000112283582046565]],"type":"surface","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script>
</div>
